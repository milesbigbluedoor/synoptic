{"version":3,"sources":["webpack:///./src/components/blog-card.js","webpack:///./src/pages/blog.js"],"names":["BlogCard","image","date","title","body","url","to","className","fluid","style","maxHeight","height","width","dangerouslySetInnerHTML","__html","split","splice","join","Blog","data","useState","page","setPage","allPostsLoaded","setAllPostsLoaded","allNodeBlog","edges","slice","map","post","key","node","id","relationships","field_image","localFile","childImageSharp","path","alias","created","value","type","onClick","posts","isAllPosts","length","prevState","query"],"mappings":"kLA8BeA,EAzBE,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAOC,EAAV,EAAUA,KAAMC,EAAhB,EAAgBA,MAAOC,EAAvB,EAAuBA,KAAMC,EAA7B,EAA6BA,IAA7B,OACf,kBAAC,OAAD,CAAMC,GAAID,EAAKE,UAAU,aACvB,yBAAKA,UAAU,oBACb,kBAAC,IAAD,CACEC,MAAOP,EACPQ,MAAO,CAAEC,UAAW,QAASC,OAAQ,QAASC,MAAO,YAIzD,yBAAKL,UAAU,2BACb,uBAAGA,UAAU,mBAAmBL,GAChC,wBAAIK,UAAU,oBAAoBJ,GAClC,uBACEI,UAAU,qBACVM,wBAAyB,CACvBC,OAAWV,EACRW,MAAM,KACNC,OAAO,EAAG,IACVC,KAAK,KAHF,a,wBCpBhB,sCA4DeC,UAnDF,SAAC,GAAc,IAAZC,EAAW,EAAXA,KAAW,EACDC,mBAAS,GAA1BC,EADkB,KACZC,EADY,OAEmBF,oBAAS,GAA9CG,EAFkB,KAEFC,EAFE,KAiCzB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKrB,MAAM,gCACX,wBAAII,UAAU,eAAd,cACA,6BAASA,UAAU,eA7BPY,EAAKM,YAAYC,MACJC,MAAM,EANd,EAMiBN,GAEhBO,KAAI,SAAAC,GAAI,OAC1B,kBAAC,EAAD,CACEC,IAAKD,EAAKE,KAAKC,GACf/B,MACE4B,EAAKE,KAAKE,cAAcC,YAAYC,UAAUC,gBAAgB5B,MAEhEL,MAAO0B,EAAKE,KAAK5B,MACjBE,IAAKwB,EAAKE,KAAKM,KAAKC,MACpBpC,KAAM2B,EAAKE,KAAKQ,QAChBnC,KAAMyB,EAAKE,KAAK3B,KAAKoC,aAkBrBjB,GACA,4BACEkB,KAAK,SACLlC,UAAU,yBACVmC,QAAS,kBAhBTC,EAAQxB,EAAKM,YAAYC,MAEzBkB,EAzBa,GAyBCvB,EAAO,IAAqBsB,EAAME,OACtDvB,GAAQ,SAAAwB,GAAS,OAAIA,EAAY,UACjCtB,EAAkBoB,GALH,IACTD,EAEAC,IAWF,eAvCR,IAqDaG,EAAK","file":"component---src-pages-blog-js-98e59935f20ca767c58f.js","sourcesContent":["import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { Link } from \"gatsby\"\nimport Img from \"gatsby-image\"\n\nconst BlogCard = ({ image, date, title, body, url }) => (\n  <Link to={url} className=\"blog-card\">\n    <div className=\"blog-card__image\">\n      <Img\n        fluid={image}\n        style={{ maxHeight: \"300px\", height: \"300px\", width: \"300px\" }}\n      />\n    </div>\n\n    <div className=\"blog-card__text-wrapper\">\n      <p className=\"blog-card__date\">{date}</p>\n      <h3 className=\"blog-card__title\">{title}</h3>\n      <p\n        className=\"blog-card__summary\"\n        dangerouslySetInnerHTML={{\n          __html: `${body\n            .split(\" \")\n            .splice(0, 25)\n            .join(\" \")} ...`,\n        }}\n      />\n    </div>\n  </Link>\n)\n\nexport default BlogCard\n\nBlogCard.propTypes = {\n  image: PropTypes.shape.isRequired,\n  date: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  body: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n}\n","import React, { useState } from \"react\"\nimport PropTypes from \"prop-types\"\nimport { graphql } from \"gatsby\"\nimport \"../scss/main.scss\"\n\nimport BlogCard from \"../components/blog-card\"\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\n\nconst Blog = ({ data }) => {\n  const [page, setPage] = useState(1)\n  const [allPostsLoaded, setAllPostsLoaded] = useState(false)\n  const postsPerPage = 4\n\n  // renders the posts to the page based on the the current paginations \"page\"\n  // and the amount of posts to be be displayed per \"page\"\n  const renderPosts = () => {\n    const posts = data.allNodeBlog.edges\n    const currentPosts = posts.slice(0, page * postsPerPage)\n\n    return currentPosts.map(post => (\n      <BlogCard\n        key={post.node.id}\n        image={\n          post.node.relationships.field_image.localFile.childImageSharp.fluid\n        }\n        title={post.node.title}\n        url={post.node.path.alias}\n        date={post.node.created}\n        body={post.node.body.value}\n      />\n    ))\n  }\n\n  const loadMore = () => {\n    const posts = data.allNodeBlog.edges\n    // check if all fetching more posts will result in all posts being displays\n    const isAllPosts = (page + 1) * postsPerPage >= posts.length\n    setPage(prevState => prevState + 1)\n    setAllPostsLoaded(isAllPosts)\n  }\n\n  return (\n    <Layout>\n      <SEO title=\"Blog | John Doe Photography\" />\n      <h1 className=\"blog__title\">Blog Posts</h1>\n      <section className=\"blog__posts\">{renderPosts()}</section>\n      {!allPostsLoaded && (\n        <button\n          type=\"button\"\n          className=\"button blog__load-more\"\n          onClick={() => loadMore()}\n        >\n          Load more\n        </button>\n      )}\n    </Layout>\n  )\n}\n\nexport default Blog\n\nexport const query = graphql`\n  query {\n    allNodeBlog(sort: { fields: created, order: DESC }) {\n      edges {\n        node {\n          id\n          title\n          path {\n            alias\n          }\n          created(formatString: \"Do MMMM YYYY\")\n          body {\n            value\n          }\n          relationships {\n            field_image {\n              localFile {\n                childImageSharp {\n                  fluid(maxWidth: 300, quality: 100) {\n                    ...GatsbyImageSharpFluid\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`\n\nBlog.propTypes = {\n  data: PropTypes.node.isRequired,\n}\n"],"sourceRoot":""}